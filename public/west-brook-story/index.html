<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>West Brook Story | SHEDS</title>

  <link rel="stylesheet" href="/libs/bootstrap/dist/css/bootstrap.min.css">
  <!-- <link rel="stylesheet" href="/libs/bootstrap/dist/css/bootstrap-theme.min.css"> -->
  <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="css/styles.css">
</head>

<body>

<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12">
      <h1>The West Brook Story</h1>
      <h2 class="sub-title">Tagging Trout and Salmon in a Small Stream Network in Western Massachusetts, USA </h2>
    </div>
  </div>

  <hr>

  <div class="main-container">
    <div class="row">
      <div class="col-xs-12">
        <div class="step-container" style="opacity: 1;">
          <div id="step1" class="step selected">1</div>
          <div id="step2" class="step">2</div>
          <div id="step3" class="step">3</div>
          <div id="step4" class="step">4</div>
          <div id="step5" class="step">5</div>
          <div id="step6" class="step">6</div>
          <div id="step7" class="step">7</div>
          <div id="step8" class="step">Explore</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-2">
        <div class="narration-container" style="opacity: 1; display: block;">
          <div class="narration-step" id="narration-step1" style="display:block">
            <p>From 1997 to 2015, we tagged almost 30,000 individual fish.</p>
            <p>Those fish were captured a total of 63,232 times, many just once, some up to 10 times.</p>
            <p>Each circle represents 25 individual fish.</p>
            <div class="navigate-btns">
              <button class="btn btn-default disabled"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step2">
            <p>There were three <b>species</b> of fish in the stream.</p>
            <p><u>Brook trout</u> are native and reproduce naturally.</p>
            <p><u>Brown trout</u> reproduce naturally, but were introduced from Europe in the mid 1800's.</p>
            <p><u>Atlantic salmon</u> were native but do not reproduce naturally. They were stocked as 25 mm fry in the spring.</p>
            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step3">
            <p>There were four <b>rivers</b> in the stream network.</p>
            <p>add map here</p>
            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step4">
            <p>We sampled in four <b>seasons</b>.</p>
            <p>Most fish were caught in Autumn, when we could first tag the youngest fish</p>
            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step5">
            <p>We sampled for 19 <b>years</b>.</p> There were high abundances in some years (e.g. 2003) and low abundances in others (e.g. 2011).</p>
            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step6">
            <p>Over the 19 <b>years</b> of sampling we couldn't sample the winter in some years because of ice.</p>
            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step7">
            <p>We started tagging <b>trout</b> in the WB in 2000 and in the WB and the tributaries in 2002.</p> We stopped stocking <b>salmon</b> in 2004. By 2008, there were very few salmon left in the stream network</p>
            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
          <div class="narration-step" id="narration-step8">
            <p>Explore the data by <b>yourself</b> by clicking buttons to change the <u>group</u> and <u>color</u> of the circles.</p>
            <form class="form-inline-vertical">
              <div class="form-group form-group-sm">
                <div>
                  Group by:
                </div>
                <div class="btn-group-vertical" role="group">
                  <button type="button" class="btn btn-default" id="all">None</button>
                  <button type="button" class="btn btn-default" id="species">Species</button>
                  <button type="button" class="btn btn-default" id="river">River</button>
                  <button type="button" class="btn btn-default" id="season">Season</button>
                  <button type="button" class="btn btn-default" id="year">Year</button>
                  <button type="button" class="btn btn-default" id="seasonYear">Season/Year</button>
                </div>
              </div>
            </form>

            <form class="form-inline-vertical">
              <div class="form-group form-group-sm">
                <div>
                  Color by:
                </div>
                <div class="btn-group-vertical" role="group">
                  <button type="button" class="btn btn-default" id="reset">None</button>
                  <button type="button" class="btn btn-default" id="colorSpecies">Species</button>
                  <button type="button" class="btn btn-default" id="colorRiver">River</button>
                  <button type="button" class="btn btn-default" id="colorSeason">Season</button>
                  <button type="button" class="btn btn-default" id="colorYear">Year</button>
                </div>
              </div>
            </form>

            <div class="navigate-btns">
              <button class="btn btn-default"><i class="fa fa-angle-double-left"></i> Prev</button>
              <button class="btn btn-default disabled">Next <i class="fa fa-angle-double-right"></i></button>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-10">
        <div id="chart-container">
          <canvas width="900" height="600"></canvas>
          <div id="chart-footnote" style="display:none">
            Each circle represents <span id="fish-per-circle"></span> individual fish
          </div>
        </div>
      </div>

      <div class="col-lg-2">
        <div class="panel panel-default" id="colorLegend">
          <div class="panel-heading" role="tab" id="headingOne">
            <h3 class="panel-title">
              <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                Color legend
              </a>
            </h3>
          </div>

          <div id="collapseOne" class="panel" role="tabpanel">
            <div class="panel-body">
              <div id="legend">
                <canvas id="legendCanvas" width="160" height="500"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="loading">
      <p>Loading...</p>
      <p><i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i></p>
    </div>
  </div>
</div>

<script src="/libs/d3/d3.js"></script>
<script src="/libs/jquery/dist/jquery.min.js"></script>
<script src="/libs/bootstrap/dist/js/bootstrap.min.js"></script>

<script src="js/app.js"></script>

<script>
d3.csv("data/coreDataOut.csv", typeCoreData, function (error,cd) {
  if (error) throw error;

  var cd = getDataEnc(cd);
  csvIn.cd = cd;

  initializeInterface();
  initializeXY(width,height);
  initializeFishData(cd);
  getXY("all");

  // variables for positioning year data
  uniqueYears = sortUnique(state.counts.map(function(d) { return d.year; }));
  stepWidth = (canvas.width - margin.left)/(uniqueYears.length + 1);

  uniqueSeasons = ["Spring", "Summer", "Autumn", "Winter"];
  stepHeight = (canvas.height - margin.top)/(uniqueSeasons.length + 1);

  $("#step1").click()

  simulation
    .nodes(state.counts)
    .on("tick", ticked);
});
</script>
</body>
</html>


